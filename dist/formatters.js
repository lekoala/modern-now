function z(t,e=null,n=document){return Array.from(n.querySelectorAll(t))}function F(t){return t.charAt(0).toUpperCase()+t.slice(1)}function P(t){return["true","1"].includes(String(t).toLowerCase())}function ct(t){return typeof t=="string"||t instanceof String}function U(t,e,n=[],o=null){for(let i of n){let p=o?`${o}${F(i)}`:i;Q(t,p)&&(e[i]=D(t,p))}}function Z(t,e=window){return t.split(".").reduce((n,o)=>n[o],e)}function S(t){if(!t)return{};if(t.endsWith("()")){let n=Z(t.replace("()",""));return n?n():{}}if(!t.includes(":"))return{default:t};let e=t;!t.startsWith("{")&&/[\w'"]\s*:\s*/.test(t)&&(e=`{${t.replace(/([^:\s{,]*)\s*:\s*('[^']*'|"[^"]*"|[^,'"{]*)/g,(n,o,i)=>`"${o.replace(/['"]/g,"")}":${i.includes('"')?i:i.replace(/'/g,'"')}`)}}`);try{return _(JSON.parse(e))}catch(n){throw`Invalid config ${t} interpreted as ${e}`}}function _(t){for(let[e,n]of Object.entries(t))if(n&&typeof n=="object"){let o=n.__fn;ct(o)?t[e]=Z(o):_(n)}return t}function ft(){return document.documentElement}function C(){return ft().getAttribute("lang")||"en"}function J(){return"IntersectionObserver"in window}function M(t,e,n){let o=(p,m)=>{for(let a of p)a.type==="attributes"&&n(a.target,a.oldValue)};new MutationObserver(o).observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:e})}function v(t,e){return t.getAttribute(e)}function O(t,e){return t.dataset[e]===""||P(t.dataset[e])}function D(t,e){let n=t.dataset[e];return n==="false"?!1:n==="true"?!0:n}function Q(t,e){return t.dataset[e]!==void 0}function A(t,e){return t.dataset[e]}function G(){return{years:3600*24*365,months:3600*24*30,weeks:3600*24*7,days:3600*24,hours:3600,minutes:60,seconds:1}}function N(t=null){return t?t instanceof Date?t:Number.isInteger(t)?new Date(t):new Date(j(B(t))):new Date}function B(t){let e=t;return pt(e)&&(e=`1970-01-01 ${e}`),lt(e,"1970-01-01 00:00:00")}function j(t){let e=t.split(" ");return`${e[0]}T${e[1]}Z`}function lt(t,e){let n=t.toString();for(;n.length<e.length;)n+=e[n.length];return n}function pt(t){return k(t)&&!W(t)}function k(t){return t.toString().includes(":")}function W(t){return t.toString().includes("-")||!k(t)}function E(t){let e=N(t);return new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().split(".")[0].replace("T"," ")}function K(t){return E(t).split(" ")[0]}function X(t){return E(t).split(" ")[1]}function Y(){return Intl.RelativeTimeFormat!==void 0}var tt="querySelectorAll",rt="querySelectorAll",{document:dt,Element:et,MutationObserver:mt,Set:gt,WeakMap:ht}=self,nt=t=>rt in t,{filter:ot}=[],it=t=>{let e=new ht,n=(r,u)=>{let s;if(u)for(let f,c=(l=>l.matches||l.webkitMatchesSelector||l.msMatchesSelector)(r),d=0,{length:h}=i;d<h;d++)c.call(r,f=i[d])&&(e.has(r)||e.set(r,new gt),s=e.get(r),s.has(f)||(s.add(f),t.handle(r,u,f)));else e.has(r)&&(s=e.get(r),e.delete(r),s.forEach(f=>{t.handle(r,u,f)}))},o=(r,u=!0)=>{for(let s=0,{length:f}=r;s<f;s++)n(r[s],u)},{query:i}=t,p=t.root||dt,m=((r,u=document,s=MutationObserver,f=["*"])=>{let c=(l,y,x,b,w,T)=>{for(let g of l)(T||tt in g)&&(w?x.has(g)||(x.add(g),b.delete(g),r(g,w)):b.has(g)||(b.add(g),x.delete(g),r(g,w)),T||c(g[tt](y),y,x,b,w,!0))},d=new s(l=>{if(f.length){let y=f.join(","),x=new Set,b=new Set;for(let{addedNodes:w,removedNodes:T}of l)c(T,y,x,b,!1,!1),c(w,y,x,b,!0,!1)}}),{observe:h}=d;return(d.observe=l=>h.call(d,l,{subtree:!0,childList:!0}))(u),d})(n,p,mt,i),{attachShadow:a}=et.prototype;return a&&(et.prototype.attachShadow=function(r){let u=a.call(this,r);return m.observe(u),u}),i.length&&o(p[rt](i)),{drop:r=>{for(let u=0,{length:s}=r;u<s;u++)e.delete(r[u])},flush:()=>{let r=m.takeRecords();for(let u=0,{length:s}=r;u<s;u++)o(ot.call(r[u].removedNodes,nt),!1),o(ot.call(r[u].addedNodes,nt),!0)},observer:m,parse:o}};function I(t,e){let n=t.get(e);n&&typeof n=="function"&&n(e)}var H=new WeakMap,L;J()&&(L=new IntersectionObserver((t,e)=>{let n=t.filter(o=>o.isIntersecting);for(let o of n){let i=o.target;e.unobserve(i),I(H,i)}}));function R(t,e){return L?(H.set(t,e),L.observe(t),()=>(H.delete(t),L.unobserve(t))):(e(t),()=>{})}var V={},q=[],st=new WeakMap,{drop:_t,flush:Jt,observer:Qt,parse:xt}=it({query:q,document,handle(t,e,n){if(e){let o=()=>{V[n][0](t)};O(t,"lazy")?st.set(t,R(t,o)):o()}else{let o=V[n][1];o&&o(t),I(st,t)}}}),$=(t,e,n=null)=>{V[t]=[e,n],q.includes(t)||(q.push(t),xt(z(t)))};function at(t){if(!t.dataset.render)return;let e=S(A(t,"datetimeConfig")),n=v(t,"datetime"),o=A(t,"style"),i=A(t,"format"),p=O(t,"relative"),m=v(t,"lang")||C(),a=e;k(n)&&!a.timeStyle&&(a.timeStyle=o||"short"),W(n)&&!a.dateStyle&&(a.dateStyle=o||"short");let r=!1,u=!1;for(let c in t.dataset)["style","format","relative","render"].includes(c)||(["year","month","day"].includes(c)&&(r=!0),["hour","minute","second"].includes(c)&&(u=!0),a[c]=D(t,c));r&&a.dateStyle&&(a.dateStyle=void 0),u&&a.timeStyle&&(a.timeStyle=void 0);let s="",f=N(n);switch(i){case"iso":s=f.toISOString();break;case"utc":s=f.toUTCString();break;case"datetime":s=E(f);break;case"date":s=K(f);break;case"time":s=X(f);break;default:if(p){let c=G(),d=(f.getTime()-Date.now())/1e3;for(let h in c)if(c[h]<Math.abs(d)){let l=d/c[h];if(Y())s=new Intl.RelativeTimeFormat(m).format(Math.round(l),h);else{let y=Math.abs(Math.floor(l)),x=y===1?h.replace(/s$/,""):h;s=`${y} ${x}`}break}}else try{let c=Date.parse(j(B(n)));s=new Intl.DateTimeFormat(m,a).format(c)}catch(c){t.dataset.error=c}break}s.length>0&&(t.innerText=s)}$("time[datetime]",t=>{v(t,"datetime")&&!t.innerText.trim()&&(t.dataset.render="true"),at(t),M(t,["datetime"],(n,o)=>{at(n)})},t=>{});function ut(t){let e=S(A(t,"numberConfig")),n=v(t,"data-number");U(t,e,["currency","unit"]);let o=v(t,"lang")||C(),i=new Intl.NumberFormat().resolvedOptions();e.currency&&(i.currency=e.currency,i.style="currency"),e.unit&&(i.unit=e.unit,i.style="unit");for(let[a,r]of Object.entries(e))i[a]=r;for(let a in t.dataset)["value","currency","unit"].includes(a)||(i[a]=D(t,a));let p=new Intl.NumberFormat(o,i),m=Number(n);t.innerText=Number.isNaN(m)?"":p.format(m)}$("span[data-number]",t=>{ut(t),M(t,["data-number"],(e,n)=>{ut(e)})},t=>{});
/*! (c) Andrea Giammarchi - ISC */
/**
 * Modern html - formatters build
 * https://github.com/lekoala/modern-now
 * @license MIT
 */
