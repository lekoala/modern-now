var W="querySelectorAll",F=(t,e=document,o=MutationObserver,i=["*"])=>{let n=(u,d,f,p,r,a)=>{for(let s of u)(a||W in s)&&(r?f.has(s)||(f.add(s),p.delete(s),t(s,r)):p.has(s)||(p.add(s),f.delete(s),t(s,r)),a||n(s[W](d),d,f,p,r,!0))},l=new o(u=>{if(i.length){let d=i.join(","),f=new Set,p=new Set;for(let{addedNodes:r,removedNodes:a}of u)n(a,d,f,p,!1,!1),n(r,d,f,p,!0,!1)}}),{observe:c}=l;return(l.observe=u=>c.call(l,u,{subtree:!0,childList:!0}))(e),l};var V="querySelectorAll",{document:dt,Element:R,MutationObserver:mt,Set:gt,WeakMap:ht}=self,j=t=>V in t,{filter:N}=[],z=t=>{let e=new ht,o=r=>{for(let a=0,{length:s}=r;a<s;a++)e.delete(r[a])},i=()=>{let r=f.takeRecords();for(let a=0,{length:s}=r;a<s;a++)c(N.call(r[a].removedNodes,j),!1),c(N.call(r[a].addedNodes,j),!0)},n=r=>r.matches||r.webkitMatchesSelector||r.msMatchesSelector,l=(r,a)=>{let s;if(a)for(let m,ft=n(r),C=0,{length:pt}=u;C<pt;C++)ft.call(r,m=u[C])&&(e.has(r)||e.set(r,new gt),s=e.get(r),s.has(m)||(s.add(m),t.handle(r,a,m)));else e.has(r)&&(s=e.get(r),e.delete(r),s.forEach(m=>{t.handle(r,a,m)}))},c=(r,a=!0)=>{for(let s=0,{length:m}=r;s<m;s++)l(r[s],a)},{query:u}=t,d=t.root||dt,f=F(l,d,mt,u),{attachShadow:p}=R.prototype;return p&&(R.prototype.attachShadow=function(r){let a=p.call(this,r);return f.observe(a),a}),u.length&&c(d[V](u)),{drop:o,flush:i,observer:f,parse:c}};function b(t,e){let o=t.get(e);o&&o(e)}function H(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function xt(t,e){return t.getAttribute(e)}function g(t,e){return t.dataset[e]===""||xt(t,`data-${H(e)}`)===""||P(t.dataset[e])}function D(t,e){return t.dataset[e]}function U(t,e,o){t.style.setProperty(`--${e}`,o)}function y(t,e){t.classList.add(e)}function q(t,e){t.classList.remove(e)}var E=(t,e)=>{if(e)return e;if(typeof t=="function")return document;if(t instanceof HTMLElement)return t;throw"Invalid handler"},_=t=>["scroll","wheel","touchstart","touchmove","touchenter","touchend","touchleave","mouseout","mouseleave","mousemove","mouseenter","mousewheel","mouseover"].includes(t)?{passive:!0}:{};function L(t,e,o=null){let i=E(e,o);for(let n of v(t))i.addEventListener(n,e,_(n))}function S(t,e,o=null){let i=E(e,o);for(let n of v(t))i.addEventListener(n,e,{once:!0})}function M(t,e,o=null){let i=E(e,o);for(let n of v(t))i.removeEventListener(n,e,_(n))}function G(t,e=null,o=document){return o.getElementById(t)}function k(t,e=null,o=document){return Array.from(o.querySelectorAll(t))}function Q(t,e=null){let o=Z("style");e&&(o.id=e),o.textContent=t,document.head.append(o)}function Z(t,e=null){let o=document.createElement(t);return e&&e.appendChild(o),o}function P(t){return["true","1"].includes(String(t).toLowerCase())}function v(t){return Array.isArray(t)?t:[t]}function bt(t){return typeof t=="string"||t instanceof String}function J(t,e=window){return t.split(".").reduce((o,i)=>o[i],e)}function Y(t){if(!t)return{};if(t.endsWith("()")){let o=J(t.replace("()",""));return o?o():{}}if(!t.includes(":"))return{default:t};let e=t;!t.startsWith("{")&&/[\w'"]\s*:\s*/.test(t)&&(e=`{${t.replace(/([^:\s{,]*)\s*:\s*('[^']*'|"[^"]*"|([\[].*?[\]])|[^,'"{\[]*)/g,(o,i,n)=>`"${i.replace(/['"]/g,"")}":${n.includes('"')?n:n.replace(/'/g,'"')}`)}}`);try{return K(JSON.parse(e))}catch(o){throw`Invalid config ${t} interpreted as ${e} with error ${o}`}}function K(t){for(let[e,o]of Object.entries(t))if(o&&typeof o=="object"){let i=o.__fn;bt(i)?t[e]=J(i):K(o)}return t}function x(t=document){return t.documentElement}function X(){let t=x();if(t.scrollHeight<=t.clientHeight)return 0;let e=Z("div");e.style.cssText="overflow:scroll; visibility:hidden; position:absolute;",document.body.appendChild(e);let o=e.offsetWidth-e.clientWidth;return e.remove(),o}function w(){return typeof HTMLDialogElement<"u"}function tt(){return"IntersectionObserver"in window}function yt(){return window.matchMedia("(prefers-reduced-motion: no-preference)")===!0||window.matchMedia("(prefers-reduced-motion: no-preference)").matches===!0}function et(t,e=null,o=!1){let l=o?"is-opening":"is-closing",c=()=>{q(t,l),e&&e()};if(!yt()){c();return}let u=getComputedStyle(t),d=u.animation.length===0||u.animation.startsWith("none"),f=u.transitionBehavior.includes("allow-discrete");if(d||f)c();else{let p=!1;S("animationstart",r=>{p=!0}),S("animationend",r=>{c()},t),y(t,l),setTimeout(()=>{p||c()},12)}}var T=new WeakMap,A;tt()&&(A=new IntersectionObserver((t,e)=>{let o=t.filter(i=>i.isIntersecting);for(let i of o){let n=i.target;e.unobserve(n),b(T,n)}}));function O(t,e){return A?(T.set(t,e),A.observe(t),()=>(T.delete(t),A.unobserve(t))):(e(t),()=>{})}var ot={},$=[],rt=window.DEBUG||!1,{drop:nt,flush:it,observer:te,parse:B}=z({query:$,document,async handle(t,e,o){let i=ot[o],n=i.initialized,l=i.lazyMap;if(rt&&console.log(t,e,o),e){let c=()=>{n.has(t)||(i.callback(t),n.add(t))};g(t,"lazy")?l.set(t,O(t,c)):c()}else if(await Promise.resolve(),!t.isConnected&&n.has(t)){let c=i.cleanup;c&&c(t),b(l,t),n.delete(t)}}});function vt(t,e,o=null){let i=new WeakSet,n=new WeakMap;ot[t]={callback:e,cleanup:o,initialized:i,lazyMap:n},rt&&console.log(`Register selector '${t}'`),$.includes(t)||($.push(t),B(k(t)))}var h=vt;var wt=window.DIALOG_POLYFILL_URL||"https://cdn.jsdelivr.net/npm/dialog-polyfill/+esm",At=`dialog{position:fixed;left:0;right:0;top:0;bottom:0;width:fit-content;height:fit-content;overflow:auto;max-height:90vh;max-width:90vw;background: white}
dialog:not([open]){display:none}
dialog+.backdrop{position:fixed;top:0;right:0;bottom:0;left:0;background:var(--backdrop-bg,rgba(0,0,0,.1))}
._dialog_overlay{position:fixed;top:0;right:0;bottom:0;left:0}`,st=()=>{if(w())return;let t="dialog-polyfill";y(x(),t),Q(At,t),import(wt).then(e=>{let o=e.default;h("dialog",n=>{o.registerDialog(n)})})};var ct=t=>{let e=t.target;e.nodeName==="DIALOG"&&(document.activeElement===e&&e.blur(),I(e))};function I(t){!t||!t.open||et(t,()=>{t.close()},!1)}function ut(){U(x(),"scrollbar-width",`${X()}px`)}function lt(t){let e=D(t,"dialog");if(!e)return;let o=G(e,"dialog");if(!o){console.error(`${e} not found`);return}return o}function Ct(t){let e=Y(D(t,"dialog"));return g(t,"dialogModal")&&(e.modal=!0),g(t,"dialogDismissible")&&(e.dismissible=!0),e}var at=t=>{if(!w()&&!HTMLFormElement.prototype.submit.toString().includes("call(this)"))return;let e=t.target.closest("button");if(!e)return;let o=lt(e),i=g(e,"dialogClose");if(o){if(i)I(o);else{let n=Ct(o);n.dismissible||n.modal?(ut(),o.showModal(),n.dismissible&&L("click",ct,o)):o.show()}return}i&&I(e.closest("dialog"))};ut();h("button[data-dialog],button[data-dialog-close]",t=>{L("click",at,t)},t=>{M("click",at,t);let e=lt(t);e&&M("click",ct,e)});st();var he={dynamicBehaviour:h,drop:nt,parse:B,flush:it};export{he as default};
/*! (c) Andrea Giammarchi - ISC */
/**
 * Modern now - dialog build
 * Modern now/github.com/lekoala/modern-now
 * @license MIT
 */
