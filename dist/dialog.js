var W="querySelectorAll",F=(t,e=document,o=MutationObserver,n=["*"])=>{let i=(u,f,l,p,r,s)=>{for(let a of u)(s||W in a)&&(r?l.has(a)||(l.add(a),p.delete(a),t(a,r)):p.has(a)||(p.add(a),l.delete(a),t(a,r)),s||i(a[W](f),f,l,p,r,!0))},d=new o(u=>{if(n.length){let f=n.join(","),l=new Set,p=new Set;for(let{addedNodes:r,removedNodes:s}of u)i(s,f,l,p,!1,!1),i(r,f,l,p,!0,!1)}}),{observe:c}=d;return(d.observe=u=>c.call(d,u,{subtree:!0,childList:!0}))(e),d};var V="querySelectorAll",{document:mt,Element:R,MutationObserver:gt,Set:ht,WeakMap:xt}=self,j=t=>V in t,{filter:N}=[],z=t=>{let e=new xt,o=r=>{for(let s=0,{length:a}=r;s<a;s++)e.delete(r[s])},n=()=>{let r=l.takeRecords();for(let s=0,{length:a}=r;s<a;s++)c(N.call(r[s].removedNodes,j),!1),c(N.call(r[s].addedNodes,j),!0)},i=r=>r.matches||r.webkitMatchesSelector||r.msMatchesSelector,d=(r,s)=>{let a;if(s)for(let m,pt=i(r),C=0,{length:dt}=u;C<dt;C++)pt.call(r,m=u[C])&&(e.has(r)||e.set(r,new ht),a=e.get(r),a.has(m)||(a.add(m),t.handle(r,s,m)));else e.has(r)&&(a=e.get(r),e.delete(r),a.forEach(m=>{t.handle(r,s,m)}))},c=(r,s=!0)=>{for(let a=0,{length:m}=r;a<m;a++)d(r[a],s)},{query:u}=t,f=t.root||mt,l=F(d,f,gt,u),{attachShadow:p}=R.prototype;return p&&(R.prototype.attachShadow=function(r){let s=p.call(this,r);return l.observe(s),s}),u.length&&c(f[V](u)),{drop:o,flush:n,observer:l,parse:c}};function b(t,e){let o=t.get(e);o&&o(e)}function H(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function bt(t,e){return t.getAttribute(e)}function g(t,e){return t.dataset[e]===""||bt(t,`data-${H(e)}`)===""||P(t.dataset[e])}function D(t,e){return t.dataset[e]}function U(t,e,o){t.style.setProperty(`--${e}`,o)}function y(t,e){t.classList.add(e)}function q(t,e){t.classList.remove(e)}var E=(t,e)=>{if(e)return e;if(typeof t=="function")return document;if(t instanceof HTMLElement)return t;throw"Invalid handler"},_=t=>["scroll","wheel","touchstart","touchmove","touchenter","touchend","touchleave","mouseout","mouseleave","mousemove","mouseenter","mousewheel","mouseover"].includes(t)?{passive:!0}:{};function L(t,e,o=null){let n=E(e,o);for(let i of v(t))n.addEventListener(i,e,_(i))}function S(t,e,o=null){let n=E(e,o);for(let i of v(t))n.addEventListener(i,e,{once:!0})}function M(t,e,o=null){let n=E(e,o);for(let i of v(t))n.removeEventListener(i,e,_(i))}function G(t,e=null,o=document){return o.getElementById(t)}function k(t,e=null,o=document){return Array.from(o.querySelectorAll(t))}function Q(t,e=null){let o=Z("style");e&&(o.id=e),o.textContent=t,document.head.append(o)}function Z(t,e=null){let o=document.createElement(t);return e&&e.appendChild(o),o}function P(t){return["true","1"].includes(String(t).toLowerCase())}function v(t){return Array.isArray(t)?t:[t]}function yt(t){return typeof t=="string"||t instanceof String}function J(t,e=window){return t.split(".").reduce((o,n)=>o[n],e)}function Y(t){if(!t)return{};if(t.endsWith("()")){let o=J(t.replace("()",""));return o?o():{}}if(!t.includes(":"))return{default:t};let e=t;!t.startsWith("{")&&/[\w'"]\s*:\s*/.test(t)&&(e=`{${t.replace(/([^:\s{,]*)\s*:\s*('[^']*'|"[^"]*"|([\[].*?[\]])|[^,'"{\[]*)/g,(o,n,i)=>`"${n.replace(/['"]/g,"")}":${i.includes('"')?i:i.replace(/'/g,'"')}`)}}`);try{return K(JSON.parse(e))}catch(o){throw`Invalid config ${t} interpreted as ${e} with error ${o}`}}function K(t){for(let[e,o]of Object.entries(t))if(o&&typeof o=="object"){let n=o.__fn;yt(n)?t[e]=J(n):K(o)}return t}function x(t=document){return t.documentElement}function X(){let t=x();if(t.scrollHeight<=t.clientHeight)return 0;let e=Z("div");e.style.cssText="overflow:scroll; visibility:hidden; position:absolute;",document.body.appendChild(e);let o=e.offsetWidth-e.clientWidth;return e.remove(),o}function w(){return typeof HTMLDialogElement<"u"}function tt(){return"IntersectionObserver"in window}function vt(){return window.matchMedia("(prefers-reduced-motion: no-preference)")===!0||window.matchMedia("(prefers-reduced-motion: no-preference)").matches===!0}function et(t,e=null,o=!1,n=!1){let c=o?"is-opening":"is-closing",u=()=>{q(t,c),e&&e()};if(vt()){let f=getComputedStyle(t),l=f.animation.length===0||f.animation.startsWith("none"),p=!n&&f.transition.includes("allow-discrete");if(l||p)e&&e();else{let r=!1;S("animationstart",s=>{r=!0}),S("animationend",s=>{u()},t),y(t,c),setTimeout(()=>{r||u()},12)}}else u()}function ot(){var t,e;return(e=(t=navigator.userAgentData)==null?void 0:t.brands)==null?void 0:e.some(o=>o.brand==="Google Chrome")}var T=new WeakMap,A;tt()&&(A=new IntersectionObserver((t,e)=>{let o=t.filter(n=>n.isIntersecting);for(let n of o){let i=n.target;e.unobserve(i),b(T,i)}}));function O(t,e){return A?(T.set(t,e),A.observe(t),()=>(T.delete(t),A.unobserve(t))):(e(t),()=>{})}var rt={},$=[],nt=window.DEBUG||!1,{drop:it,flush:st,observer:ee,parse:B}=z({query:$,document,async handle(t,e,o){let n=rt[o],i=n.initialized,d=n.lazyMap;if(nt&&console.log(t,e,o),e){let c=()=>{i.has(t)||(n.callback(t),i.add(t))};g(t,"lazy")?d.set(t,O(t,c)):c()}else if(await Promise.resolve(),!t.isConnected&&i.has(t)){let c=n.cleanup;c&&c(t),b(d,t),i.delete(t)}}});function wt(t,e,o=null){let n=new WeakSet,i=new WeakMap;rt[t]={callback:e,cleanup:o,initialized:n,lazyMap:i},nt&&console.log(`Register selector '${t}'`),$.includes(t)||($.push(t),B(k(t)))}var h=wt;var At=window.DIALOG_POLYFILL_URL||"https://cdn.jsdelivr.net/npm/dialog-polyfill/+esm",Ct=`dialog{position:fixed;left:0;right:0;top:0;bottom:0;width:fit-content;height:fit-content;overflow:auto;max-height:90vh;max-width:90vw;background: white}
dialog:not([open]){display:none}
dialog+.backdrop{position:fixed;top:0;right:0;bottom:0;left:0;background:var(--backdrop-bg,rgba(0,0,0,.1))}
._dialog_overlay{position:fixed;top:0;right:0;bottom:0;left:0}`,at=()=>{if(w())return;let t="dialog-polyfill";y(x(),t),Q(Ct,t),import(At).then(e=>{let o=e.default;h("dialog",i=>{o.registerDialog(i)})})};var ut=t=>{let e=t.target;e.nodeName==="DIALOG"&&(document.activeElement===e&&e.blur(),I(e,!ot()))};function I(t,e=!1){!t||!t.open||et(t,()=>{t.close()},!1,e)}function lt(){U(x(),"scrollbar-width",`${X()}px`)}function ft(t){let e=D(t,"dialog");if(!e)return;let o=G(e,"dialog");if(!o){console.error(`${e} not found`);return}return o}function Dt(t){let e=Y(D(t,"dialog"));return g(t,"dialogModal")&&(e.modal=!0),g(t,"dialogDismissible")&&(e.dismissible=!0),e}var ct=t=>{if(!w()&&!HTMLFormElement.prototype.submit.toString().includes("call(this)"))return;let e=t.target.closest("button");if(!e)return;let o=ft(e),n=g(e,"dialogClose");if(o){if(n)I(o);else{let i=Dt(o);i.dismissible||i.modal?(lt(),o.showModal(),i.dismissible&&L("click",ut,o)):o.show()}return}n&&I(e.closest("dialog"))};lt();h("button[data-dialog],button[data-dialog-close]",t=>{L("click",ct,t)},t=>{M("click",ct,t);let e=ft(t);e&&M("click",ut,e)});at();var he={dynamicBehaviour:h,drop:it,parse:B,flush:st};export{he as default};
/*! (c) Andrea Giammarchi - ISC */
/**
 * Modern now - dialog build
 * Modern now/github.com/lekoala/modern-now
 * @license MIT
 */
