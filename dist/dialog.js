var V="querySelectorAll",j=(t,e=document,o=MutationObserver,r=["*"])=>{let n=(d,m,f,p,i,s)=>{for(let a of d)(s||V in a)&&(i?f.has(a)||(f.add(a),p.delete(a),t(a,i)):p.has(a)||(p.add(a),f.delete(a),t(a,i)),s||n(a[V](m),m,f,p,i,!0))},c=new o(d=>{if(r.length){let m=r.join(","),f=new Set,p=new Set;for(let{addedNodes:i,removedNodes:s}of d)n(s,m,f,p,!1,!1),n(i,m,f,p,!0,!1)}}),{observe:l}=c;return(c.observe=d=>l.call(c,d,{subtree:!0,childList:!0}))(e),c};var U="querySelectorAll",{document:xt,Element:N,MutationObserver:bt,Set:yt,WeakMap:wt}=self,z=t=>U in t,{filter:P}=[],q=t=>{let e=new wt,o=i=>{for(let s=0,{length:a}=i;s<a;s++)e.delete(i[s])},r=()=>{let i=f.takeRecords();for(let s=0,{length:a}=i;s<a;s++)l(P.call(i[s].removedNodes,z),!1),l(P.call(i[s].addedNodes,z),!0)},n=i=>i.matches||i.webkitMatchesSelector||i.msMatchesSelector,c=(i,s)=>{let a;if(s)for(let u,g=n(i),D=0,{length:ht}=d;D<ht;D++)g.call(i,u=d[D])&&(e.has(i)||e.set(i,new yt),a=e.get(i),a.has(u)||(a.add(u),t.handle(i,s,u)));else e.has(i)&&(a=e.get(i),e.delete(i),a.forEach(u=>{t.handle(i,s,u)}))},l=(i,s=!0)=>{for(let a=0,{length:u}=i;a<u;a++)c(i[a],s)},{query:d}=t,m=t.root||xt,f=j(c,m,bt,d),{attachShadow:p}=N.prototype;return p&&(N.prototype.attachShadow=function(i){let s=p.call(this,i);return f.observe(s),s}),d.length&&l(m[U](d)),{drop:o,flush:r,observer:f,parse:l}};function b(t,e){let o=t.get(e);o&&o(e)}function H(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function Ct(t,e){return t.getAttribute(e)}function h(t,e){return t.dataset[e]===""||Ct(t,`data-${H(e)}`)===""||Y(t.dataset[e])}function S(t,e){return t.dataset[e]}function _(t,e,o=null){let r=X(e)?e:{[e]:o};for(let[n,c]of Object.entries(r))t.setAttribute(n,`${c}`)}function G(t,e,o){t.style.setProperty(`--${e}`,o)}function E(t,e){return t.classList.contains(e)}function y(t,e){t.classList.add(e)}function Q(t,e){t.classList.remove(e)}var Z=(t,e)=>{if(e)return e;if(typeof t=="function")return document;if(t instanceof HTMLElement)return t;throw"Invalid handler"},J=t=>["scroll","wheel","touchstart","touchmove","touchenter","touchend","touchleave","mouseout","mouseleave","mousemove","mouseenter","mousewheel","mouseover"].includes(t)?{passive:!0}:{};function L(t,e,o=null){let r=Z(e,o);for(let n of T(t))r.addEventListener(n,e,J(n))}function M(t,e,o=null){let r=Z(e,o);for(let n of T(t))r.removeEventListener(n,e,J(n))}function K(t,e=null,o=document){return o.getElementById(t)}function k(t,e=null,o=document){return Array.from(o.querySelectorAll(t))}function et(t,e=null){let o=ot("style");e&&(o.id=e),o.textContent=t,document.head.append(o)}function ot(t,e=null){let o=document.createElement(t);return e&&e.appendChild(o),o}function Y(t){return["true","1"].includes(String(t).toLowerCase())}function T(t){return Array.isArray(t)?t:[t]}function tt(t){return t===void 0?0:Number.parseFloat(`${t}`)}function X(t){return typeof t=="object"&&t!==null}function vt(t){return typeof t=="string"||t instanceof String}function nt(t,e=window){return t.split(".").reduce((o,r)=>o[r],e)}function rt(t){if(!t)return{};if(t.endsWith("()")){let o=nt(t.replace("()",""));return o?o():{}}if(!t.includes(":"))return{default:t};let e=t;!t.startsWith("{")&&/[\w'"]\s*:\s*/.test(t)&&(e=`{${t.replace(/([^:\s{,]*)\s*:\s*('[^']*'|"[^"]*"|([\[].*?[\]])|[^,'"{\[]*)/g,(o,r,n)=>`"${r.replace(/['"]/g,"")}":${n.includes('"')?n:n.replace(/'/g,'"')}`)}}`);try{return it(JSON.parse(e))}catch(o){throw`Invalid config ${t} interpreted as ${e} with error ${o}`}}function it(t){for(let[e,o]of Object.entries(t))if(o&&typeof o=="object"){let r=o.__fn;vt(r)?t[e]=nt(r):it(o)}return t}function C(t=document){return t.documentElement}function At(){let t=C();if(t.scrollHeight<=t.clientHeight)return 0;let e=ot("div");e.style.cssText="overflow:scroll; visibility:hidden; position:absolute;",document.body.appendChild(e);let o=e.offsetWidth-e.clientWidth;return e.remove(),o}function O(){G(C(),"scrollbar-width",`${At()}px`)}function v(){return typeof HTMLDialogElement<"u"}function st(){return"IntersectionObserver"in window}function Dt(){return window.matchMedia("(prefers-reduced-motion: no-preference)")===!0||window.matchMedia("(prefers-reduced-motion: no-preference)").matches===!0}function St(t,e=0){return setTimeout(t,e)}function Et(t){let e="is-closing",r=E(t,"is-opening");return E(t,e)||r}function w(t){return t.endsWith("ms")?tt(t):t.endsWith("s")?tt(t)*1e3:0}function Lt(t){return new Promise(e=>{let o=getComputedStyle(t),r=o.animationDuration.split(", "),n=o.animationDelay.split(", "),c=o.transitionDuration.split(", "),l=o.transitionDelay.split(", "),d=Math.max(...r.map((u,g)=>w(u)+w(n[g]||"0s"))),m=Math.max(...c.map((u,g)=>w(u)+w(l[g]||"0s"))),f=Math.max(d,m);if(f===0){e();return}let p=!1,i=["animationend","transitionend","animationcancel","transitioncancel"],s=u=>{if(!(u.target!==t||p)){p=!0,clearTimeout(a);for(let g of i)t.removeEventListener(g,s);e()}},a=St(()=>{p||s({target:t})},f+50);for(let u of i)t.addEventListener(u,s)})}async function at(t,e=null,o=!1){let r="is-closing",n="is-opening";if(Et(t))return;if(!Dt()){e&&e();return}let c=o?n:r;y(t,c),await Lt(t),Q(t,c),e&&e()}var $=new WeakMap,A;st()&&(A=new IntersectionObserver((t,e)=>{let o=t.filter(r=>r.isIntersecting);for(let r of o){let n=r.target;e.unobserve(n),b($,n)}}));function B(t,e){return A?($.set(t,e),A.observe(t),()=>($.delete(t),A.unobserve(t))):(e(t),()=>{})}var ct={},W=[],ut=window.DEBUG||!1,{drop:lt,flush:ft,observer:ce,parse:I}=q({query:W,document,async handle(t,e,o){let r=ct[o],n=r.initialized,c=r.lazyMap;if(ut&&console.log(t,e,o),e){let l=()=>{n.has(t)||(r.callback(t),n.add(t))};h(t,"lazy")?c.set(t,B(t,l)):l()}else if(await Promise.resolve(),!t.isConnected){if(b(c,t),n.has(t)){let l=r.cleanup;l&&l(t)}n.delete(t)}}});function Mt(t,e,o=null){let r=new WeakSet,n=new WeakMap;ct[t]={callback:e,cleanup:o,initialized:r,lazyMap:n},ut&&console.log(`Register selector '${t}'`),W.includes(t)||(W.push(t),I(k(t)))}var x=Mt;var Tt=window.DIALOG_POLYFILL_URL||"https://cdn.jsdelivr.net/npm/dialog-polyfill/+esm",kt=`dialog{position:fixed;left:0;right:0;top:0;bottom:0;width:fit-content;height:fit-content;overflow:auto;max-height:90vh;max-width:90vw;background: white}
dialog:not([open]){display:none}
dialog+.backdrop{position:fixed;top:0;right:0;bottom:0;left:0;background:var(--backdrop-bg,rgba(0,0,0,.1))}
._dialog_overlay{position:fixed;top:0;right:0;bottom:0;left:0}`,pt=()=>{if(v())return;let t="dialog-polyfill";y(C(),t),et(kt,t),import(Tt).then(e=>{let o=e.default;x("dialog",n=>{o.registerDialog(n)})})};function Ot(t,e){let o=t.getBoundingClientRect();return e.clientX<o.left||e.clientX>o.right||e.clientY<o.top||e.clientY>o.bottom}var dt=t=>{let e=t.target;e.nodeName==="DIALOG"&&gt(e).dismissible&&Ot(e,t)&&(document.activeElement===e&&e.blur(),R(e));let o=e.closest("button");o&&h(o,"dialogClose")&&R(o.closest("dialog"))};function R(t){!t||!t.open||at(t,()=>{t.close()},!1)}function F(t){let e=S(t,"dialog");if(!e)return;let o=K(e,"dialog");if(!o){console.error(`${e} not found`);return}return o}function gt(t){let e=rt(S(t,"dialog"));return h(t,"dialogModal")&&(e.modal=!0),h(t,"dialogDismissible")&&(e.dismissible=!0),e}var mt=t=>{if(!v()&&!HTMLFormElement.prototype.submit.toString().includes("call(this)"))return;let e=t.target.closest("button");if(!e)return;let o=F(e);if(!o)return;if(h(e,"dialogClose")){R(o);return}let n=gt(o);n.dismissible||n.modal?(O(),o.showModal()):o.show()};O();x("button[data-dialog]",t=>{L("click",mt,t);let e=F(t);e&&(_(t,"aria-controls",e.id),L("click",dt,e))},t=>{M("click",mt,t);let e=F(t);e&&M("click",dt,e)});pt();var Se={dynamicBehaviour:x,drop:lt,parse:I,flush:ft};export{Se as default};
/*! (c) Andrea Giammarchi - ISC */
/**
 * Modern now - dialog build
 * Modern now/github.com/lekoala/modern-now
 * @license MIT
 */
