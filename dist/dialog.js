var j="querySelectorAll",N=(t,e=document,o=MutationObserver,i=["*"])=>{let r=(f,g,l,p,n,a)=>{for(let s of f)(a||j in s)&&(n?l.has(s)||(l.add(s),p.delete(s),t(s,n)):p.has(s)||(p.add(s),l.delete(s),t(s,n)),a||r(s[j](g),g,l,p,n,!0))},u=new o(f=>{if(i.length){let g=i.join(","),l=new Set,p=new Set;for(let{addedNodes:n,removedNodes:a}of f)r(a,g,l,p,!1,!1),r(n,g,l,p,!0,!1)}}),{observe:c}=u;return(u.observe=f=>c.call(u,f,{subtree:!0,childList:!0}))(e),u};var q="querySelectorAll",{document:xt,Element:V,MutationObserver:bt,Set:yt,WeakMap:vt}=self,z=t=>q in t,{filter:U}=[],H=t=>{let e=new vt,o=n=>{for(let a=0,{length:s}=n;a<s;a++)e.delete(n[a])},i=()=>{let n=l.takeRecords();for(let a=0,{length:s}=n;a<s;a++)c(U.call(n[a].removedNodes,z),!1),c(U.call(n[a].addedNodes,z),!0)},r=n=>n.matches||n.webkitMatchesSelector||n.msMatchesSelector,u=(n,a)=>{let s;if(a)for(let d,C=r(n),E=0,{length:ht}=f;E<ht;E++)C.call(n,d=f[E])&&(e.has(n)||e.set(n,new yt),s=e.get(n),s.has(d)||(s.add(d),t.handle(n,a,d)));else e.has(n)&&(s=e.get(n),e.delete(n),s.forEach(d=>{t.handle(n,a,d)}))},c=(n,a=!0)=>{for(let s=0,{length:d}=n;s<d;s++)u(n[s],a)},{query:f}=t,g=t.root||xt,l=N(u,g,bt,f),{attachShadow:p}=V.prototype;return p&&(V.prototype.attachShadow=function(n){let a=p.call(this,n);return l.observe(a),a}),f.length&&c(g[q](f)),{drop:o,flush:i,observer:l,parse:c}};function b(t,e){let o=t.get(e);o&&o(e)}function P(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function wt(t,e){return t.getAttribute(e)}function m(t,e){return t.dataset[e]===""||wt(t,`data-${P(e)}`)===""||Z(t.dataset[e])}function D(t,e){return t.dataset[e]}function _(t,e,o=null){let i=J(e)?e:{[e]:o};for(let[r,u]of Object.entries(i))t.setAttribute(r,`${u}`)}function G(t,e,o){t.style.setProperty(`--${e}`,o)}function L(t,e){return t.classList.contains(e)}function y(t,e){t.classList.add(e)}function Q(t,e){t.classList.remove(e)}var S=(t,e)=>{if(e)return e;if(typeof t=="function")return document;if(t instanceof HTMLElement)return t;throw"Invalid handler"},Y=t=>["scroll","wheel","touchstart","touchmove","touchenter","touchend","touchleave","mouseout","mouseleave","mousemove","mouseenter","mousewheel","mouseover"].includes(t)?{passive:!0}:{};function M(t,e,o=null){let i=S(e,o);for(let r of v(t))i.addEventListener(r,e,Y(r))}function T(t,e,o=null){let i=S(e,o);for(let r of v(t))i.addEventListener(r,e,{once:!0})}function k(t,e,o=null){let i=S(e,o);for(let r of v(t))i.removeEventListener(r,e,Y(r))}function K(t,e=null,o=document){return o.getElementById(t)}function O(t,e=null,o=document){return Array.from(o.querySelectorAll(t))}function X(t,e=null){let o=tt("style");e&&(o.id=e),o.textContent=t,document.head.append(o)}function tt(t,e=null){let o=document.createElement(t);return e&&e.appendChild(o),o}function Z(t){return["true","1"].includes(String(t).toLowerCase())}function v(t){return Array.isArray(t)?t:[t]}function J(t){return typeof t=="object"&&t!==null}function At(t){return typeof t=="string"||t instanceof String}function et(t,e=window){return t.split(".").reduce((o,i)=>o[i],e)}function ot(t){if(!t)return{};if(t.endsWith("()")){let o=et(t.replace("()",""));return o?o():{}}if(!t.includes(":"))return{default:t};let e=t;!t.startsWith("{")&&/[\w'"]\s*:\s*/.test(t)&&(e=`{${t.replace(/([^:\s{,]*)\s*:\s*('[^']*'|"[^"]*"|([\[].*?[\]])|[^,'"{\[]*)/g,(o,i,r)=>`"${i.replace(/['"]/g,"")}":${r.includes('"')?r:r.replace(/'/g,'"')}`)}}`);try{return rt(JSON.parse(e))}catch(o){throw`Invalid config ${t} interpreted as ${e} with error ${o}`}}function rt(t){for(let[e,o]of Object.entries(t))if(o&&typeof o=="object"){let i=o.__fn;At(i)?t[e]=et(i):rt(o)}return t}function x(t=document){return t.documentElement}function nt(){let t=x();if(t.scrollHeight<=t.clientHeight)return 0;let e=tt("div");e.style.cssText="overflow:scroll; visibility:hidden; position:absolute;",document.body.appendChild(e);let o=e.offsetWidth-e.clientWidth;return e.remove(),o}function w(){return typeof HTMLDialogElement<"u"}function it(){return"IntersectionObserver"in window}function Ct(){return window.matchMedia("(prefers-reduced-motion: no-preference)")===!0||window.matchMedia("(prefers-reduced-motion: no-preference)").matches===!0}function Et(t){t&&clearTimeout(t)}function st(t,e=null,o=!1){let i="is-closing",r="is-opening",u=o?r:i,c=()=>{Q(t,u),e&&e()},f=L(t,r);if(L(t,i)||f)return;if(!Ct()){c();return}let l=getComputedStyle(t),p=l.animation.length===0||l.animation.startsWith("none"),n=l.transitionBehavior.includes("allow-discrete");if(p&&!n){c();return}let a=n?"transition":"animation",s=setTimeout(()=>{d||c()},12),d=!1;T(`${a}start`,C=>{d=!0,Et(s)}),T(`${a}end`,C=>{c()},t),y(t,u)}var $=new WeakMap,A;it()&&(A=new IntersectionObserver((t,e)=>{let o=t.filter(i=>i.isIntersecting);for(let i of o){let r=i.target;e.unobserve(r),b($,r)}}));function B(t,e){return A?($.set(t,e),A.observe(t),()=>($.delete(t),A.unobserve(t))):(e(t),()=>{})}var at={},I=[],ct=window.DEBUG||!1,{drop:ut,flush:lt,observer:re,parse:W}=H({query:I,document,async handle(t,e,o){let i=at[o],r=i.initialized,u=i.lazyMap;if(ct&&console.log(t,e,o),e){let c=()=>{r.has(t)||(i.callback(t),r.add(t))};m(t,"lazy")?u.set(t,B(t,c)):c()}else if(await Promise.resolve(),!t.isConnected&&r.has(t)){let c=i.cleanup;c&&c(t),b(u,t),r.delete(t)}}});function Dt(t,e,o=null){let i=new WeakSet,r=new WeakMap;at[t]={callback:e,cleanup:o,initialized:i,lazyMap:r},ct&&console.log(`Register selector '${t}'`),I.includes(t)||(I.push(t),W(O(t)))}var h=Dt;var Lt=window.DIALOG_POLYFILL_URL||"https://cdn.jsdelivr.net/npm/dialog-polyfill/+esm",St=`dialog{position:fixed;left:0;right:0;top:0;bottom:0;width:fit-content;height:fit-content;overflow:auto;max-height:90vh;max-width:90vw;background: white}
dialog:not([open]){display:none}
dialog+.backdrop{position:fixed;top:0;right:0;bottom:0;left:0;background:var(--backdrop-bg,rgba(0,0,0,.1))}
._dialog_overlay{position:fixed;top:0;right:0;bottom:0;left:0}`,ft=()=>{if(w())return;let t="dialog-polyfill";y(x(),t),X(St,t),import(Lt).then(e=>{let o=e.default;h("dialog",r=>{o.registerDialog(r)})})};var pt=t=>{let e=t.target;e.nodeName==="DIALOG"&&mt(e).dismissible&&(document.activeElement===e&&e.blur(),F(e));let o=e.closest("button");o&&m(o,"dialogClose")&&F(o.closest("dialog"))};function F(t){!t||!t.open||st(t,()=>{t.close()},!1)}function gt(){G(x(),"scrollbar-width",`${nt()}px`)}function R(t){let e=D(t,"dialog");if(!e)return;let o=K(e,"dialog");if(!o){console.error(`${e} not found`);return}return o}function mt(t){let e=ot(D(t,"dialog"));return m(t,"dialogModal")&&(e.modal=!0),m(t,"dialogDismissible")&&(e.dismissible=!0),e}var dt=t=>{if(!w()&&!HTMLFormElement.prototype.submit.toString().includes("call(this)"))return;let e=t.target.closest("button");if(!e)return;let o=R(e);if(!o)return;if(m(e,"dialogClose")){F(o);return}let r=mt(o);r.dismissible||r.modal?(gt(),o.showModal()):o.show()};gt();h("button[data-dialog]",t=>{M("click",dt,t);let e=R(t);e&&(_(t,"aria-controls",e.id),M("click",pt,e))},t=>{k("click",dt,t);let e=R(t);e&&k("click",pt,e)});ft();var xe={dynamicBehaviour:h,drop:ut,parse:W,flush:lt};export{xe as default};
/*! (c) Andrea Giammarchi - ISC */
/**
 * Modern now - dialog build
 * Modern now/github.com/lekoala/modern-now
 * @license MIT
 */
